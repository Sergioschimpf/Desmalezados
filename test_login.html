<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prueba Login Google (Nuevo)</title>
<script src="https://apis.google.com/js/api.js"></script>
<script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
<h2>Prueba de Login con Google (Nuevo)</h2>
<button id="loginBtn">Iniciar Sesión</button>
<pre id="output"></pre>

<script>
const CLIENT_ID = "97793571405-f6ggo2qia339e71k8gg79s54pot0u5t5.apps.googleusercontent.com";
const SCOPES = 'https://www.googleapis.com/auth/drive.file';

let tokenClient;

function initTokenClient() {
  tokenClient = google.accounts.oauth2.initTokenClient({
    client_id: CLIENT_ID,
    scope: SCOPES,
    callback: (response) => {
      if (response.error) {
        document.getElementById('output').innerText = 'Error: ' + JSON.stringify(response);
        return;
      }
      // Ahora el token está disponible:
      document.getElementById('output').innerText = "Token: " + response.access_token;
    }
  });
}

document.getElementById('loginBtn').onclick = () => {
  if (tokenClient) {
    tokenClient.requestAccessToken();
  } else {
    document.getElementById('output').innerText = "TokenClient no inicializado aún.";
  }
};

window.onload = initTokenClient;
</script>
</body>
</html>









